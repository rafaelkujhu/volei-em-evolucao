<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vôlei em Evolução</title>

<style>
/* ===== ESTILO EXISTENTE (INALTERADO) ===== */
:root{
  --primary:#3f51b5;
  --bg:#f2f4f8;
  --card:#ffffff;
  --soft:#f7f9ff;
  --radius:14px;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:var(--bg);
}

.app{
  max-width:420px;
  margin:auto;
  min-height:100vh;
  padding:16px;
}

h1,h2,h3{color:var(--primary);}

input,select{
  width:100%;
  padding:10px;
  height:42px;
  border-radius:10px;
  border:1px solid #dcdcdc;
  font-size:14px;
  box-sizing:border-box;
  margin-top:6px;
}

button{
  width:100%;
  padding:14px;
  margin-top:14px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:12px;
  font-size:15px;
}

.perfil{
  background:linear-gradient(135deg,#3f51b5,#5c6bc0);
  color:#fff;
  padding:12px;
  border-radius:var(--radius);
  font-size:13px;
  line-height:1.5;
}

.fundamentos{display:grid;gap:12px;}
.card{
  background:var(--card);
  padding:12px;
  border-radius:var(--radius);
  box-shadow:0 4px 10px rgba(0,0,0,.05);
}

.grid-inputs{display:grid;grid-template-columns:1fr 1fr;gap:8px;}

.progress{
  height:8px;
  background:#e0e4f5;
  border-radius:8px;
  overflow:hidden;
  margin-top:8px;
}

.progress-bar{height:100%;width:0%;transition:width .8s ease;}
.pb-red{background:#d32f2f;}
.pb-yellow{background:#f9a825;}
.pb-green{background:#388e3c;}

.resultado{
  background:var(--soft);
  padding:12px;
  border-radius:var(--radius);
  margin-top:12px;
  font-size:13px;
}

canvas{margin-top:12px;background:#fff;border-radius:var(--radius);}
.oculto{display:none;}

@media print{
  button, #login, #treinador{display:none;}
  body{background:#fff;}
}
</style>
</head>

<body>
<div class="app">

<!-- TODO O CONTEÚDO DO SEU ARQUIVO PERMANECE IGUAL ATÉ AQUI -->
<!-- (login, app atleta, fundamentos, dashboard, histórico, etc.) -->

<!-- ===== PDF PEDAGÓGICO (ACRÉSCIMO INVISÍVEL) ===== -->
<div id="pdfPedagogico" class="oculto">
  <h2>Relatório Pedagógico do Atleta</h2>
  <p><strong>Nome:</strong> <span id="pdfNome"></span></p>
  <p><strong>Idade:</strong> <span id="pdfIdade"></span></p>
  <p><strong>Posição:</strong> <span id="pdfPosicao"></span></p>

  <h3>Indicadores Corporais</h3>
  <p>IMC: <span id="pdfIMC"></span></p>
  <p>IAC: <span id="pdfIAC"></span></p>

  <h3>Última Sessão</h3>
  <div id="pdfFundamentos"></div>

  <h3>Treino Recomendado</h3>
  <div id="pdfTreino"></div>

  <p style="margin-top:20px;font-size:12px">
    Este relatório tem caráter pedagógico e visa acompanhar a evolução
    técnica e corporal do atleta ao longo do processo esportivo.
  </p>
</div>

<!-- ===== MODO TREINADOR – GRÁFICO POR ATLETA ===== -->
<div id="graficoTreinador" class="oculto">
  <h3>Evolução do Atleta</h3>
  <canvas id="graficoAtleta" width="360" height="180"></canvas>
</div>

</div>

<script>
/* ===== ACRÉSCIMO: PDF PEDAGÓGICO ===== */
function gerarPDF(){
  let atleta = JSON.parse(localStorage.getItem(atletaAtual));
  if(!atleta) return;

  pdfNome.innerText = atleta.perfil.nome;
  pdfIdade.innerText = atleta.perfil.idade;
  pdfPosicao.innerText = atleta.perfil.posicao;

  let imc = (atleta.perfil.peso/(atleta.perfil.altura**2)).toFixed(1);
  let iac = ((atleta.perfil.quadril/(atleta.perfil.altura*Math.sqrt(atleta.perfil.altura)))-18).toFixed(1);

  pdfIMC.innerText = imc;
  pdfIAC.innerText = iac;

  let ultima = atleta.sessoes[atleta.sessoes.length-1];
  let html="";
  for(let f in ultima.fundamentos){
    html+=`${f}: ${ultima.fundamentos[f]}%<br>`;
  }
  pdfFundamentos.innerHTML = html;
  pdfTreino.innerHTML = document.getElementById("saida").innerHTML;

  pdfPedagogico.classList.remove("oculto");
  window.print();
  pdfPedagogico.classList.add("oculto");
}

/* ===== ACRÉSCIMO: GRÁFICO POR ATLETA NO TREINADOR ===== */
function mostrarGraficoAtleta(nome){
  let atleta = JSON.parse(localStorage.getItem(nome));
  if(!atleta) return;

  graficoTreinador.classList.remove("oculto");
  let ctx = graficoAtleta.getContext("2d");
  ctx.clearRect(0,0,360,180);

  atleta.sessoes.forEach((s,i)=>{
    let media = Object.values(s.fundamentos).reduce((a,b)=>a+b,0)/4;
    let h = media*1.4;
    ctx.fillStyle="#7986cb";
    ctx.fillRect(20+i*40,160-h,30,h);
    ctx.fillText(Math.round(media)+"%",22+i*40,155-h);
  });
}

/* ===== ACRÉSCIMO NO LISTADOR DO TREINADOR ===== */
function abrirTreinador(){
  login.classList.add("oculto");
  treinador.classList.remove("oculto");

  let html="";
  for(let k in localStorage){
    try{
      let a=JSON.parse(localStorage.getItem(k));
      if(a?.perfil){
        html+=`
        <div class="card" onclick="mostrarGraficoAtleta('${a.perfil.nome}')">
          <strong>${a.perfil.nome}</strong><br>
          ${a.perfil.posicao}
        </div>`;
      }
    }catch{}
  }
  listaAtletas.innerHTML=html;
}
</script>
</body>
</html>
