<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V√¥lei em Evolu√ß√£o</title>

<style>
:root{
  --primary:#3f51b5;
  --bg:#f2f4f8;
  --card:#ffffff;
  --soft:#f7f9ff;
  --radius:16px;
}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:var(--bg);
}
.app{
  max-width:420px;
  margin:auto;
  min-height:100vh;
  padding:18px;
}
h1,h2{color:var(--primary);}
input,select{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #ddd;
  margin-top:8px;
}
button{
  width:100%;
  padding:14px;
  margin-top:14px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:14px;
  font-size:15px;
}
.perfil{
  background:linear-gradient(135deg,#3f51b5,#5c6bc0);
  color:#fff;
  padding:14px;
  border-radius:var(--radius);
  font-size:14px;
  margin-bottom:16px;
}
.fundamentos{display:grid;gap:14px;}
.card{
  background:var(--card);
  padding:14px;
  border-radius:var(--radius);
  box-shadow:0 6px 16px rgba(0,0,0,.05);
}
.grid-inputs{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.progress{
  height:10px;
  background:#e0e4f5;
  border-radius:10px;
  overflow:hidden;
  margin-top:6px;
}
.progress-bar{
  height:100%;
  width:0%;
  transition:width 1s ease;
}
.pb-red{background:#d32f2f;}
.pb-yellow{background:#f9a825;}
.pb-green{background:#388e3c;}
.meta{
  font-size:12px;
  margin-top:6px;
  display:flex;
  justify-content:space-between;
}
.resultado{
  background:var(--soft);
  padding:14px;
  border-radius:var(--radius);
  margin-top:14px;
  font-size:14px;
}
canvas{
  margin-top:14px;
  background:#fff;
  border-radius:var(--radius);
}
.oculto{display:none;}
</style>
</head>

<body>
<div class="app">

<!-- LOGIN -->
<div id="telaLogin">
  <h1>üèê V√¥lei em Evolu√ß√£o</h1>
  <input id="nome" placeholder="Nome do atleta">
  <input id="idade" type="number" placeholder="Idade">
  <select id="posicao">
    <option value="">Posi√ß√£o</option>
    <option>Levantador(a)</option>
    <option>Ponteiro(a)</option>
    <option>Central</option>
    <option>Oposto(a)</option>
    <option>L√≠bero</option>
  </select>
  <button onclick="entrarApp()">Entrar</button>
</div>

<!-- APP -->
<div id="app" class="oculto">

<div class="perfil">
<strong>Atleta:</strong> <span id="pNome"></span> ¬∑
<strong>Idade:</strong> <span id="pIdade"></span> ¬∑
<strong>Posi√ß√£o:</strong> <span id="pPosicao"></span>
</div>

<h2>Fundamentos</h2>
<div class="fundamentos" id="fundamentos"></div>

<button onclick="analisar()">Analisar Sess√£o</button>

<div id="saida"></div>

<h2>Dashboard</h2>
<canvas id="grafico" width="360" height="200"></canvas>

<button onclick="gerarPDF()">üìÑ Gerar Relat√≥rio em PDF</button>
<button onclick="sair()">Trocar Atleta</button>

</div>
</div>

<script>
const META=70;
let atletaAtual=null;
const fundamentosLista=["Saque","Passe","Ataque","Defesa"];

function entrarApp(){
  if(!nome.value||!idade.value||!posicao.value){
    alert("Preencha todos os campos");
    return;
  }
  atletaAtual=nome.value;
  localStorage.setItem(atletaAtual+"_perfil",JSON.stringify({
    nome:nome.value,idade:idade.value,posicao:posicao.value
  }));
  carregarPerfil();
  montarFundamentos();
  telaLogin.classList.add("oculto");
  app.classList.remove("oculto");
}

function sair(){
  app.classList.add("oculto");
  telaLogin.classList.remove("oculto");
}

function carregarPerfil(){
  let p=JSON.parse(localStorage.getItem(atletaAtual+"_perfil"));
  pNome.innerText=p.nome;
  pIdade.innerText=p.idade;
  pPosicao.innerText=p.posicao;
}

function montarFundamentos(){
  fundamentos.innerHTML="";
  fundamentosLista.forEach(f=>{
    fundamentos.innerHTML+=`
    <div class="card">
      <h3>${f}</h3>
      <div class="grid-inputs">
        <input id="${f}A" type="number" placeholder="Acertos">
        <input id="${f}E" type="number" placeholder="Erros">
      </div>
      <div class="progress">
        <div id="bar${f}" class="progress-bar"></div>
      </div>
      <div class="meta">
        <span>Meta ${META}%</span>
        <span id="txt${f}">0%</span>
      </div>
    </div>`;
  });
}

function analisar(){
  let dados=[];
  fundamentosLista.forEach(f=>{
    let A=+document.getElementById(f+"A").value||0;
    let E=+document.getElementById(f+"E").value||0;
    let pct=A+E?Math.round(A/(A+E)*100):0;
    dados.push({nome:f,pct});
    atualizarBarra(f,pct);
  });
  mostrarResultado(dados);
  grafico(dados);
}

function atualizarBarra(f,pct){
  let b=document.getElementById("bar"+f);
  let t=document.getElementById("txt"+f);
  t.innerText=pct+"%";
  b.style.width=pct+"%";
  b.className="progress-bar "+(pct<META?"pb-red":pct<85?"pb-yellow":"pb-green");
}

function mostrarResultado(d){
  let medalhas=d.filter(f=>f.pct>=META).map(()=> "üèÖ").join("");
  saida.innerHTML=`
  <div class="resultado">
    üèÜ Medalhas: ${medalhas||"Nenhuma ainda"}
  </div>`;
}

function grafico(d){
  let c=grafico.getContext("2d");
  c.clearRect(0,0,360,200);
  d.forEach((f,i)=>{
    let h=f.pct*1.5;
    c.fillStyle="#3f51b5";
    c.fillRect(30+i*80,180-h,50,h);
    c.fillText(f.nome,30+i*80,195);
    c.fillText(f.pct+"%",35+i*80,165-h);
  });
}

function gerarPDF(){window.print();}
</script>
</body>
</html>
