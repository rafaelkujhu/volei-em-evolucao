<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V√¥lei em Evolu√ß√£o</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#f2f4f8;
}
.app{
  max-width:420px;
  margin:auto;
  background:#fff;
  min-height:100vh;
  padding:20px;
}
h1{text-align:center;color:#3f51b5;}
h2{color:#3f51b5;margin-top:20px;}
input,select{
  width:100%;
  padding:12px;
  margin-top:10px;
}
button{
  width:100%;
  padding:15px;
  margin-top:15px;
  background:#3f51b5;
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:16px;
}
.fundamento{margin-top:15px;}
.duplo input{width:48%;display:inline-block;}
.resultado{
  margin-top:20px;
  padding:15px;
  border-radius:10px;
  background:#eef1ff;
}
.vermelho{color:#d32f2f;}
.amarelo{color:#f9a825;}
.verde{color:#388e3c;}
canvas{margin-top:20px;}
.oculto{display:none;}
.perfil{
  background:#f7f9ff;
  padding:12px;
  border-radius:10px;
  margin-bottom:10px;
  font-size:14px;
}
</style>
</head>

<body>
<div class="app">

<!-- PERFIL / LOGIN ATLETA -->
<div id="login">
  <h1>üèê V√¥lei em Evolu√ß√£o</h1>

  <input id="nome" placeholder="Nome do atleta">
  <input id="idade" type="number" placeholder="Idade">

  <select id="genero">
    <option value="">G√™nero</option>
    <option>Feminino</option>
    <option>Masculino</option>
    <option>Outro</option>
  </select>

  <select id="posicao">
    <option value="">Posi√ß√£o</option>
    <option>Levantador(a)</option>
    <option>Ponteiro(a)</option>
    <option>Central</option>
    <option>Oposto(a)</option>
    <option>L√≠bero</option>
  </select>

  <button onclick="login()">Entrar</button>
</div>

<!-- APP -->
<div id="app" class="oculto">

<h1>üèê V√¥lei em Evolu√ß√£o</h1>

<div class="perfil">
<strong>Atleta:</strong> <span id="pNome"></span><br>
<strong>Idade:</strong> <span id="pIdade"></span> anos<br>
<strong>G√™nero:</strong> <span id="pGenero"></span><br>
<strong>Posi√ß√£o:</strong> <span id="pPosicao"></span>
</div>

<!-- FUNDAMENTOS -->
<h2>Fundamentos</h2>

<div class="fundamento duplo"><strong>Saque</strong>
<input id="saqueA" type="number" placeholder="Acertos">
<input id="saqueE" type="number" placeholder="Erros"></div>

<div class="fundamento duplo"><strong>Passe</strong>
<input id="passeA" type="number" placeholder="Acertos">
<input id="passeE" type="number" placeholder="Erros"></div>

<div class="fundamento duplo"><strong>Ataque</strong>
<input id="ataqueA" type="number" placeholder="Acertos">
<input id="ataqueE" type="number" placeholder="Erros"></div>

<div class="fundamento duplo"><strong>Defesa</strong>
<input id="defesaA" type="number" placeholder="Acertos">
<input id="defesaE" type="number" placeholder="Erros"></div>

<button onclick="analisar()">Analisar Desempenho</button>

<!-- COORDENA√á√ÉO -->
<h2>Coordena√ß√£o & Consci√™ncia Corporal</h2>

<select id="coord">
  <option value="0">Coordena√ß√£o</option>
  <option value="40">Baixa</option>
  <option value="65">M√©dia</option>
  <option value="85">Boa</option>
</select>

<select id="cons">
  <option value="0">Consci√™ncia corporal</option>
  <option value="40">Baixa</option>
  <option value="65">M√©dia</option>
  <option value="85">Boa</option>
</select>

<button onclick="avaliarCorporal()">Avaliar Corpo</button>

<div id="saida"></div>

<h2>Dashboard</h2>
<canvas id="grafico" width="360" height="200"></canvas>

<button onclick="logout()">Trocar Atleta</button>

</div>
</div>

<script>
let atletaAtual=null;

// LOGIN ATLETA
function login(){
  if(!nome.value||!idade.value||!genero.value||!posicao.value)
    return alert("Preencha todo o perfil");

  atletaAtual = nome.value;
  localStorage.setItem(atletaAtual+"_perfil", JSON.stringify({
    nome:nome.value,
    idade:idade.value,
    genero:genero.value,
    posicao:posicao.value
  }));

  carregarPerfil();
  mostrarApp(true);
}

function logout(){
  atletaAtual=null;
  mostrarApp(false);
}

function mostrarApp(on){
  document.getElementById("login").classList.toggle("oculto",on);
  document.getElementById("app").classList.toggle("oculto",!on);
}

function carregarPerfil(){
  let p = JSON.parse(localStorage.getItem(atletaAtual+"_perfil"));
  pNome.innerText=p.nome;
  pIdade.innerText=p.idade;
  pGenero.innerText=p.genero;
  pPosicao.innerText=p.posicao;
}

// HIST√ìRICO
function salvar(d){
  let h=JSON.parse(localStorage.getItem(atletaAtual))||[];
  h.push(d);
  localStorage.setItem(atletaAtual,JSON.stringify(h));
}

// AN√ÅLISE FUNDAMENTOS
function analisar(){
  let dados=[
    calc("Saque",saqueA,saqueE),
    calc("Passe",passeA,passeE),
    calc("Ataque",ataqueA,ataqueE),
    calc("Defesa",defesaA,defesaE)
  ];

  let pior=dados.reduce((a,b)=>a.pct<b.pct?a:b);
  let melhor=dados.reduce((a,b)=>a.pct>b.pct?a:b);
  let media=Math.round(dados.reduce((s,f)=>s+f.pct,0)/4);

  let nivel=media<50?"Iniciante":media<75?"Intermedi√°rio":"Avan√ßado";

  salvar({tipo:"fundamentos",dados,media,nivel,data:new Date()});
  grafico(dados);

  saida.innerHTML=`
  <div class="resultado">
  üéØ <strong>Prioridade:</strong> <span class="vermelho">${pior.nome}</span><br>
  üí™ <strong>Ponto forte:</strong> <span class="verde">${melhor.nome}</span><br>
  üìä <strong>M√©dia:</strong> ${media}%<br>
  üè∑Ô∏è <strong>N√≠vel:</strong> ${nivel}
  </div>`;
}

// C√ÅLCULO
function calc(n,a,e){
  let A=+a.value||0,E=+e.value||0;
  let t=A+E;
  return {nome:n,pct:t?Math.round(A/t*100):0};
}

// AVALIA√á√ÉO CORPORAL
function avaliarCorporal(){
  let m=Math.round((+coord.value + +cons.value)/2);
  let txt=m<60?"Trabalhar base motora":
          m<80?"Boa evolu√ß√£o corporal":
          "Excelente controle corporal";

  salvar({tipo:"corporal",media:m,data:new Date()});
  saida.innerHTML+=`<div class="resultado">üß† ${txt} (${m}%)</div>`;
}

// GR√ÅFICO
function grafico(d){
  let c=grafico.getContext("2d");
  c.clearRect(0,0,360,200);
  d.forEach((f,i)=>{
    let h=f.pct*1.5;
    c.fillStyle="#3f51b5";
    c.fillRect(30+i*80,180-h,50,h);
    c.fillText(f.nome,30+i*80,195);
    c.fillText(f.pct+"%",35+i*80,165-h);
  });
}
</script>
</body>
</html>
